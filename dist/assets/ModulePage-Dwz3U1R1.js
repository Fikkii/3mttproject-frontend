import{r as o,y as x,h,i as c,g as w,c as m,o as n,a,l as M,b as _,w as k,m as S,F as B,j as E,t as T,B as U,e as V,n as z}from"./index-_9QuGeYa.js";import{_ as F}from"./AdminForm-BsCRtVOI.js";const I={class:"mt-3"},N=["value"],$={__name:"ModulePage",setup(A){o([]);const u=o([]),p=o([]);o([]);const d=o([]),s=o(!1),i=x();h(()=>{v(),f()});const r=o([{name:"title",placeholder:"Enter module Title",res:""},{name:"order",placeholder:"Enter module Order",res:""}]);async function f(){try{const e=await c.get("/api/courses");if(e.status==200){const t=e.data;p.value=t}}catch(e){console.error("Caught error:",e)}}async function v(){try{const e=await c.get("/api/modules");if(e.status==200){const t=e.data;u.value=t,console.log(u.value)}}catch(e){console.error("Caught error:",e)}}function b(e,t){r.value[e].res=t}async function g(){try{if((await c.post("/api/admin/modules",{courseId:d.value,title:r.value[0].res,order:r.value[1].res})).status!==201)throw new Error("Unable to create Module");v(),s.value=!1,i.success("Module Created Successfully...")}catch{i.error("Unable to create Module...")}}function y(){s.value=!1}return(e,t)=>{const C=w("CategorizedTable");return n(),m("div",null,[a("div",null,[s.value?(n(),M(F,{key:0,fields:r.value,onUpdate:b,onClose:y,onSubmit:g},{default:k(()=>[a("div",I,[S(a("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>d.value=l),class:"p-2 border"},[(n(!0),m(B,null,E(p.value,l=>(n(),m("option",{value:l.id},T(l.title),9,N))),256))],512),[[U,d.value]])])]),_:1},8,["fields"])):_("",!0)]),a("div",{class:z([s.value?"blur":""])},[a("div",null,[a("button",{onClick:t[1]||(t[1]=l=>s.value=!s.value),class:"bg-blue-500 py-2 text-white block col-start-2 ms-auto w-[200px] rounded"},"Add module"),t[2]||(t[2]=a("div",{class:"flex gap-2 mt-4"},[a("input",{class:"px-4 py-2 rounded-sm flex-1",placeholder:"Enter Module Title",type:"text"}),a("button",{class:"px-4 py-2 bg-yellow-500 text-white rounded"},"Search")],-1)),t[3]||(t[3]=a("select",{class:"px-4 py-2 mt-2 border rounded-sm"},[a("option",null,"Latest"),a("option",null,"Active"),a("option",null,"Inactive")],-1))]),V(C,{items:u.value},null,8,["items"])],2)])}}};export{$ as default};
