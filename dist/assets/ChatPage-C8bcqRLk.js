import{_ as b,r as l,i as f,e as _,c as u,o as n,a,F as k,h as w,n as c,t as p,j as C,v as B,d as S,w as j,k as M,l as T,m as V,p as A}from"./index-DoQ3gmgm.js";const F={class:"flex flex-col h-[500px] bg-white dark:bg-gray-900 rounded-xl shadow p-4"},I={class:"flex gap-2 justify-end"},L=["disabled"],N={__name:"ChatCard",setup(g){const s=l(""),t=l([]),r=l(!1),i=l(null),x="https://aiserver.fikki.com.ng",y=localStorage.getItem("token")||"",m=async()=>{if(!s.value.trim())return;const d={role:"user",content:s.value.trim()};t.value.push(d),s.value="",r.value=!0;try{const e=await V.post(`${x}/api/chat`,{message:d.content,history:t.value.slice(-10)},{headers:{Authorization:`Bearer ${y}`}});t.value.push({role:"model",content:e.data.reply})}catch(e){t.value.push({role:"model",content:"⚠️ Failed to get response from Gemini."}),console.error(e)}finally{r.value=!1}};return f(t,()=>{nextTick(()=>{i.value.scrollTop=i.value.scrollHeight})}),(d,e)=>{const h=_("RouterLink");return n(),u("div",F,[e[2]||(e[2]=a("div",{class:"text-xl font-semibold mb-2 text-gray-800 dark:text-gray-100"},"🤖 AI Study Buddy",-1)),a("div",{ref_key:"chatContainer",ref:i,class:"flex-1 overflow-y-auto space-y-4 mb-4 px-2 scroll-smooth"},[(n(!0),u(k,null,w(t.value,(o,v)=>(n(),u("div",{key:v,class:c(["flex",o.role==="user"?"justify-end":"justify-start"])},[a("div",{class:c(["max-w-sm px-4 py-2 rounded-lg",o.role==="user"?"bg-blue-600 text-white":"bg-gray-200 text-gray-800 dark:bg-gray-800 dark:text-gray-100"])},p(o.content),3)],2))),128))],512),a("form",{onSubmit:T(m,["prevent"])},[C(a("textarea",{"onUpdate:modelValue":e[0]||(e[0]=o=>s.value=o),type:"text",placeholder:"Ask me anything...",class:"w-full px-4 py-2 rounded-lg border dark:border-gray-700 bg-white dark:bg-gray-800 dark:text-white focus:outline-none",required:""},null,512),[[B,s.value]]),a("div",I,[S(h,{to:{name:"ebooks"},type:"submit",class:"px-6 py-2 bg-black text-white rounded-lg hover:bg-blue-700 disabled:opacity-50"},{default:j(()=>e[1]||(e[1]=[M(" Explore Resources ")])),_:1,__:[1]}),a("button",{type:"submit",disabled:r.value,class:"px-6 py-2 bg-black text-white rounded-lg hover:bg-blue-700 disabled:opacity-50"},p(r.value?"Sending...":"Send"),9,L)])],32)])}}},R=b(N,[["__scopeId","data-v-44ad76c8"]]),z={__name:"ChatPage",setup(g){return(s,t)=>(n(),A(R))}};export{z as default};
