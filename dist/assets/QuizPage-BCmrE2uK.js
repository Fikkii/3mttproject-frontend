import{_ as j,r as i,s as f,c,a as t,b as m,j as P,v as T,q as F,t as s,F as N,h as E,n as Q,o as v}from"./index-DoQ3gmgm.js";const O={class:"max-w-3xl mx-auto p-6 bg-white rounded-lg shadow-md"},B={key:0,class:"mb-6"},G=["disabled"],L=["disabled"],V={key:0,class:"text-red-600 mt-2"},D={key:1},I={class:"mb-4 text-lg font-semibold text-gray-700"},J={class:"mb-4 p-4 border rounded shadow-sm"},K={class:"mb-3 font-medium"},R={class:"space-y-2"},M=["onClick"],U={class:"flex justify-between"},Y=["disabled"],$=["disabled"],H={key:2,class:"text-center"},W={class:"mb-1"},X={class:"mb-1"},Z={class:"mb-4"},ee={__name:"QuizPage",setup(te){const g=i(""),r=i(!1),n=i(""),o=i([]),p=i([]),a=i(0),h=i(!1),u=i(null),_=f(()=>o.value.length>0),y=f(()=>o.value[a.value]||{}),w=f(()=>p.value[a.value]??null),x=f(()=>a.value===o.value.length-1);async function k(){if(!g.value.trim()){n.value="Please enter a topic.";return}r.value=!0,n.value="",o.value=[],p.value=[],a.value=0,h.value=!1,u.value=null;try{const l=await fetch("http://localhost:3000/api/quiz/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:g.value})});if(!l.ok){const d=await l.json();throw new Error(d.error||"Failed to generate quiz")}const e=await l.json();o.value=e.questions||[],o.value.length===0?n.value="No questions generated.":p.value=Array(o.value.length).fill(null)}catch(l){n.value=l.message}finally{r.value=!1}}function z(l){p.value[a.value]=l}function C(){x.value?S():a.value++}function q(){a.value>0&&a.value--}async function S(){r.value=!0,n.value="";const l=p.value.map(e=>e!==null?String.fromCharCode(65+e):null);try{const e=await fetch("http://localhost:3000/api/quiz/evaluate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({questions:o.value,userAnswers:l})});if(!e.ok){const d=await e.json();throw new Error(d.error||"Failed to evaluate quiz")}u.value=await e.json(),h.value=!0}catch(e){n.value=e.message}finally{r.value=!1}}function A(){g.value="",o.value=[],p.value=[],a.value=0,h.value=!1,u.value=null,n.value=""}return(l,e)=>(v(),c("div",O,[e[2]||(e[2]=t("h1",{class:"text-2xl font-bold mb-4 text-indigo-700"},"Quiz Generator",-1)),_.value?m("",!0):(v(),c("div",B,[P(t("input",{"onUpdate:modelValue":e[0]||(e[0]=d=>g.value=d),onKeydown:F(k,["enter"]),placeholder:"Enter a topic to generate quiz...",class:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400",disabled:r.value},null,40,G),[[T,g.value]]),t("button",{onClick:k,disabled:r.value||!g.value.trim(),class:"mt-3 bg-indigo-600 text-white px-5 py-2 rounded-lg hover:bg-indigo-700 transition"},s(r.value?"Generating...":"Generate Quiz"),9,L),n.value?(v(),c("p",V,s(n.value),1)):m("",!0)])),_.value&&!h.value?(v(),c("div",D,[t("h2",I," Question "+s(a.value+1)+" / "+s(o.value.length),1),t("div",J,[t("p",K,s(y.value.question),1),t("div",R,[(v(!0),c(N,null,E(y.value.options,(d,b)=>(v(),c("button",{key:b,onClick:se=>z(b),class:Q(["block w-full text-left px-4 py-2 rounded-lg border",w.value===b?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-800 border-gray-300 hover:bg-indigo-100"])},s(String.fromCharCode(65+b))+". "+s(d),11,M))),128))])]),t("div",U,[t("button",{onClick:q,disabled:a.value===0,class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 disabled:opacity-50"}," Previous ",8,Y),t("button",{onClick:C,disabled:w.value===null,class:"px-4 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50"},s(x.value?"Submit Quiz":"Next"),9,$)])])):m("",!0),h.value?(v(),c("div",H,[e[1]||(e[1]=t("h2",{class:"text-xl font-semibold mb-3"},"Your Results",-1)),t("p",W,"Total Questions: "+s(u.value.totalQuestions),1),t("p",X,"Correct Answers: "+s(u.value.correctAnswers),1),t("p",Z,"Score: "+s(u.value.scorePercent.toFixed(2))+"%",1),t("p",{class:Q([u.value.passed?"text-green-600":"text-red-600","font-bold text-lg"])},s(u.value.passed?"Passed ✅":"Failed ❌"),3),t("button",{onClick:A,class:"mt-6 px-6 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700"}," Take Another Quiz ")])):m("",!0)]))}},oe=j(ee,[["__scopeId","data-v-7480ce0b"]]);export{oe as default};
