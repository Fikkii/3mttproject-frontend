import{r as a,y as w,h as T,i as u,g as k,c as d,o as n,a as s,l as S,b as B,w as M,m as V,F as z,j as E,t as F,B as I,e as g,n as N}from"./index-_9QuGeYa.js";import{_ as $}from"./AdminForm-BsCRtVOI.js";import{_ as A}from"./ToastEditor-C5zSMft8.js";import"./_commonjsHelpers-D6-XlEtG.js";const D={class:"relative"},L={class:"w-screen"},R={class:"mt-3"},U=["value"],j={class:"col-span-2"},K={__name:"TopicPage",setup(P){const p=a([]),v=a([]),r=a([]),m=a(""),o=a(!1),f=w(),i=a(null);T(()=>{_(),y()});const c=a([{name:"title",placeholder:"Enter topic Title",res:""}]);async function _(){try{const e=await u.get("/api/topics");if(e.status==200){const t=e.data;console.log(t),p.value=t}}catch(e){console.error("Caught error:",e)}}async function y(){try{const e=await u.get("/api/modules");if(e.status==200){const t=e.data;v.value=t}}catch(e){console.error("Caught error:",e)}}function b(e,t){c.value[e].res=t}async function h(){try{i.value&&(m.value=i.value.saveContent());const e=await u.post("/api/admin/topics",{moduleId:r.value,title:c.value[0].res,content:m.value});_(),o.value=!o.value,f.success("Topic Created Successfully...")}catch(e){console.log(e),f.error(e.response.data.error)}}function x(){o.value=!1}return(e,t)=>{const C=k("CategorizedTable");return n(),d("div",D,[s("div",L,[o.value?(n(),S($,{key:0,fields:c.value,onUpdate:b,onClose:x,onSubmit:h},{default:M(()=>[s("div",R,[V(s("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>r.value=l),class:"p-2 border"},[(n(!0),d(z,null,E(v.value,l=>(n(),d("option",{value:l.id},F(l.module_title),9,U))),256))],512),[[I,r.value]])]),s("div",j,[g(A,{ref_key:"toastRef",ref:i},null,512)])]),_:1},8,["fields"])):B("",!0)]),s("div",{class:N([o.value?"blur":""])},[s("div",null,[s("button",{onClick:t[1]||(t[1]=l=>o.value=!o.value),class:"bg-blue-500 py-2 text-white block col-start-2 ms-auto w-[200px] rounded"},"Add topic"),t[2]||(t[2]=s("div",{class:"flex gap-2 mt-4"},[s("input",{class:"px-4 py-2 rounded-sm flex-1",placeholder:"Enter topic Title",type:"text"}),s("button",{class:"px-4 py-2 bg-yellow-500 text-white rounded"},"Search")],-1)),t[3]||(t[3]=s("select",{class:"px-4 py-2 mt-2 border rounded-sm"},[s("option",null,"Latest"),s("option",null,"Active"),s("option",null,"Inactive")],-1))]),g(C,{items:p.value},null,8,["items"])],2)])}}};export{K as default};
